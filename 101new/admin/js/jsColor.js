!function(g){g.jsColorPicker=function(o,p){function u(o,e){var r=this,t=r.input,i=r.patch,l=o.RND.rgb,n=o.RND.hsl,s=r.isIE8?(o.alpha<.16?"0":"")+Math.round(100*o.alpha).toString(16).toUpperCase()+o.HEX:"",c=l.r+", "+l.g+", "+l.b,a="rgba("+c+", "+o.alpha+")",d=1!==o.alpha&&!r.isIE8,l=t.getAttribute("data-colorMode");i.style.cssText="color:"+(.22<o.rgbaMixCustom.luminance?"#222":"#ddd")+";background-color:"+a+";filter:"+(r.isIE8?"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+s+",endColorstr=#"+s+")":""),t.value="HEX"!==l||d?"rgb"===l||"HEX"===l&&d?d?a:"rgb("+c+")":"hsl"+(d?"a(":"(")+n.h+", "+n.s+"%, "+n.l+"%"+(d?", "+o.alpha:"")+")":"#"+(r.isIE8?s:o.HEX),r.displayCallback&&r.displayCallback(o,e,r)}function k(o){return o.value||o.getAttribute("value")||o.style.backgroundColor||"#FFFFFF"}function C(o,e){var r=m.current;if("toMemory"===e){for(var t=r.nodes.memos,i="",l=0,n=[],s=0,c=t.length;s<c;s++)i=t[s].style.backgroundColor,l=t[s].style.opacity,l=Math.round(100*(""===l?1:l))/100,n.push(i.replace(/, /g,",").replace("rgb(","rgba(").replace(")",","+l+")"));n="'"+n.join("','")+"'",ColorPicker.docCookies("colorPickerMemos"+(this.noAlpha?"NoAlpha":""),n)}else"resizeApp"===e?ColorPicker.docCookies("colorPickerSize",r.color.options.currentSize):"modeChange"===e&&(r=r.color.options.mode,ColorPicker.docCookies("colorPickerMode",r.type+"-"+r.z))}function e(a,d,o){var e=o?"removeEventListener":"addEventListener";a[e]("focus",function(o){var e=g.ColorPicker.getOrigin(this),r=d?Array.prototype.indexOf.call(f,this):0,t=m[r]||(m[r]=function(o,e){var r,t={klass:g.ColorPicker,input:o,patch:o,isIE8:!!document.all&&!document.addEventListener,margin:{left:-1,top:2},customBG:"#FFFFFF",color:k(o),initStyle:"display: none",mode:ColorPicker.docCookies("colorPickerMode")||"hsv-h",memoryColors:ColorPicker.docCookies("colorPickerMemos"+((e||{}).noAlpha?"NoAlpha":"")),size:ColorPicker.docCookies("colorPickerSize")||1,renderCallback:u,actionCallback:C};for(r in e)t[r]=e[r];return new t.klass(t)}(this,p)),i=t.color.options,l=t.nodes.colorPicker,n=i.appendTo||document.body,s=/static/.test(g.getComputedStyle(n).position)?{left:0,top:0}:n.getBoundingClientRect(),c=0;i.color=k(a),l.style.cssText="position: absolute;"+(m[r].cssIsReady?"":"display: none;")+"left:"+(e.left+i.margin.left-s.left)+"px;top:"+(e.top+ +this.offsetHeight+i.margin.top-s.top)+"px;",d||(i.input=a,i.patch=a,t.setColor(k(a),void 0,void 0,!0),t.saveAsBackground()),m.current=m[r],n.appendChild(l),c=setInterval(function(){m.current.cssIsReady&&(c=clearInterval(c),l.style.display="block")},10)}),m.evt&&!o||(m.evt=!0,g[e]("mousedown",function(o){var e=m.current,r=e?e.nodes.colorPicker:void 0,t=(e&&e.color.options.animationSpeed,e&&function(o){for(;o;){if(-1!==(o.className||"").indexOf("cp-app"))return o;o=o.parentNode}return!1}(o.target)),i=Array.prototype.indexOf.call(f,o.target);t&&Array.prototype.indexOf.call(m,t)?o.target===e.nodes.exit&&(r.style.display="none",document.activeElement.blur()):-1!==i||r&&(r.style.display="none")}))}var m=g.jsColorPicker.colorPickers||[],f=document.querySelectorAll(o),r=new g.Colors({customBG:p.customBG,allMixDetails:!0});g.jsColorPicker.colorPickers=m;for(var t=0,i=f.length;t<i;t++){var l,n,s=f[t];"destroy"===p?(e(s,p&&p.multipleInstances,!0),m[t]&&m[t].destroyAll()):(n=(l=k(s)).split("("),r.setColor(l),p&&p.init&&p.init(s,r.colors),s.setAttribute("data-colorMode",n[1]?n[0].substr(0,3):"HEX"),e(s,p&&p.multipleInstances,!1),p&&p.readOnly&&(s.readOnly=!0))}return g.jsColorPicker.colorPickers},g.ColorPicker.docCookies=function(o,e,r){var t,i,l,n,s=encodeURIComponent,c=decodeURIComponent,a={};if(void 0===e){for(i=(t=document.cookie.split(/;\s*/)||[]).length;i--;)(l=t[i].split("="))[0]&&(a[c(l.shift())]=c(l.join("=")));return o?a[o]:a}r=r||{},(""===e||r.expires<0)&&(r.expires=-1),void 0!==r.expires&&(n=new Date).setDate(n.getDate()+r.expires),document.cookie=s(o)+"="+s(e)+(n?"; expires="+n.toUTCString():"")+(r.path?"; path="+r.path:"")+(r.domain?"; domain="+r.domain:"")+(r.secure?"; secure":"")}}(this);