!function(w,G){"use strict";function e(e){this.options={color:"rgba(204, 82, 37, 0.8)",mode:"rgb-b",fps:60,delayOffset:8,CSSPrefix:"cp-",allMixDetails:!0,alphaBG:"w",imagePath:""},function(e,t){var o,r,s,a="",n="";for(r in t)e.options[r]=t[r];for(s in d=document.createStyleSheet!==G&&document.getElementById||!!w.MSInputMethodContext,p=void 0!==document.body.style.opacity,m=new Colors(e.options),delete e.options,(Z=m.options).scale=1,n=Z.CSSPrefix,e.color=m,M=Z.valueRanges,e.nodes=W=function(e){var t,o,r=e.getElementsByTagName("*"),s={colorPicker:e},a=new RegExp(Z.CSSPrefix);s.styles={},s.textNodes={},s.memos=[],s.testNode=document.createElement("div");for(var n=0,l=r.length;n<l;n++)t=r[n],(o=t.className)&&a.test(o)?(o=o.split(" ")[0].replace(Z.CSSPrefix,"").replace(/-/g,"_"),/_disp/.test(o)?(o=o.replace("_disp",""),s.styles[o]=t.style,s.textNodes[o]=t.firstChild,t.contentEditable=!0):(/(?:hs|cmyk|Lab).*?(?:butt|labl)/.test(o)||(s[o]=t),/(?:cur|sld[^s]|opacity|cont|col)/.test(o)&&(s.styles[o]=(/(?:col\d)/.test(o)?t.children[0]:t).style))):/memo/.test(t.parentNode.className)&&s.memos.push(t);return s.panelCover=s.panel.appendChild(document.createElement("div")),s}(function(t){function o(e,t){var o=document.createElement("style");o.setAttribute("type","text/css"),t&&o.setAttribute("id",t),o.styleSheet||o.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(o),o.styleSheet&&(document.styleSheets[document.styleSheets.length-1].cssText=e)}var e=document.createElement("div"),r=Z.CSSPrefix,s="data:image/png;base64,",a=document.createElement("img");if(i)return t.color.options.devPicker;document.getElementById("colorPickerCSS")?t.cssIsReady=!0:(a.onload=a.onerror=function(){var e;c._cssFunc&&(e=1===this.width&&1===this.height,c._cssFunc=c._cssFunc.replace(/ยง/g,r).replace("_patches.png",e?s+c._patchesPng:Z.imagePath+"_patches.png").replace("_vertical.png",e?s+c._verticalPng:Z.imagePath+"_vertical.png").replace("_horizontal.png",e?s+c._horizontalPng:Z.imagePath+"_horizontal.png"),o(c._cssFunc,"colorPickerCSS"),Z.customCSS||(c._cssMain=c._cssMain.replace(/ยง/g,r).replace("_bgs.png",e?s+c._bgsPng:Z.imagePath+"_bgs.png").replace("_icons.png",e?s+c._iconsPng:Z.imagePath+"_icons.png").replace(/opacity:(\d*\.*(\d+))/g,function(e,t){return p?"-moz-opacity: "+t+"; -khtml-opacity: "+t+"; opacity: "+t:'-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity='+j.round(100*+t)+')";filter: alpha(opacity='+j.round(100*+t)+")"}),o(c._cssMain))),t.cssIsReady=!0},a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==");(l=y)&&_();return e.insertAdjacentHTML("afterbegin",y?y.nodes.colorPicker.outerHTML||(new XMLSerializer).serializeToString(y.nodes.colorPicker):c._html.replace(/ยง/g,r)),(e=e.children[0]).style.cssText=Z.initStyle||"",(Z.appendTo||document.body).appendChild(e)}(e)),k(Z.mode),g(e),T(),a=" "+Z.mode.type+"-"+Z.mode.z,W.slds.className+=a,W.panel.className+=a,Z.noHexButton&&K(W.HEX_butt,n+"butt",n+"labl"),Z.size!==G&&S(G,Z.size),o={alphaBG:W.alpha_labl,cmyOnly:W.HEX_labl})Z[s]!==G&&C({target:o[s],data:Z[s]});Z.noAlpha&&(W.colorPicker.className+=" no-alpha"),e.renderMemory(Z.memoryColors),h(e),z=!0,b(G,"init"),l&&(g(l),$())}(this,e||{})}var z,A,X,L,y,l,c=w.ColorPicker,i=!c,d=!1,p=!1,M={},s={w:"White",b:"Black",c:"Custom"},a="",n=1,u={},H={},D=!0,O={},U={},m={},Y={},Z={},W={},j=Math,t="AnimationFrame",I="request"+t,r="cancel"+t,o=["ms","moz","webkit","o"];function g(e){D=!0,y!==e&&(Y=(y=e).color.colors,Z=e.color.options,W=e.nodes,m=e.color,U={},P(Y))}function h(s,e){e=e?re:oe;e(W.colorPicker,"mousedown",function(e){var t=e||w.event,o=te(t),r=(t.button||t.which)<2?t.target||t.srcElement:{},e=r.className;if(g(s),A=r,b(G,"resetEventListener"),a="",r===W.sldl_3||r===W.curm?(A=W.sldl_3,z=V,a="changeXYValue",K(W.slds,"do-drag")):/sldr/.test(e)||r===W.curl||r===W.curr?(A=W.sldr_4,z=F,a="changeZValue"):r===W.opacity.children[0]||r===W.opacity_slider?(A=W.opacity,z=f,a="changeOpacityValue"):/-disp/.test(e)&&!/HEX-/.test(e)?(z=v,a="changeInputValue",(3===r.nextSibling.nodeType?r.nextSibling:r).nextSibling.appendChild(W.nsarrow),X={type:(X=e.split("-disp")[0].split("-"))[0],z:X[1]||""},K(W.panel,"start-change"),n=0):r!==W.resize||Z.noResize?z=G:(Z.sizes||function(){var e=["L","S","XS","XXS"];Z.sizes={},W.testNode.style.cssText="position:absolute;left:-1000px;top:-1000px;",document.body.appendChild(W.testNode);for(var t=e.length;t--;)W.testNode.className=Z.CSSPrefix+"app "+e[t],Z.sizes[e[t]]=[W.testNode.offsetWidth,W.testNode.offsetHeight];W.testNode.removeNode?W.testNode.removeNode(!0):document.body.removeChild(W.testNode)}(),A=W.resizer,z=S,a="resizeApp"),z&&(u={pageX:o.X,pageY:o.Y},A.style.display="block",(H=ee(A)).width=W.opacity.offsetWidth,H.childWidth=W.opacity_slider.offsetWidth,A.style.display="",z(t),oe(d?document.body:w,"mousemove",z),L=w[I]($)),!/-disp/.test(e))return J(t)}),e(W.colorPicker,"click",function(e){g(s),C(e)}),e(W.colorPicker,"dblclick",C),e(W.colorPicker,"keydown",function(e){g(s),x(e)}),e(W.colorPicker,"keypress",x),e(W.colorPicker,"paste",function(e){return e.target.firstChild.data=e.clipboardData.getData("Text"),J(e)})}function b(e,t){var o=z;z&&(w[r](L),re(d?document.body:w,"mousemove",z),n&&(X={type:"alpha"},$()),"function"!=typeof z&&"number"!=typeof z||delete Z.webUnsave,n=1,z=G,K(W.slds,"do-drag",""),K(W.panel,"(?:start-change|do-change)",""),W.resizer.style.cssText="",W.panelCover.style.cssText="",W.memo_store.style.cssText="background-color: "+q(Y.RND.rgb)+"; "+Q(Y.alpha),W.memo.className=W.memo.className.replace(/\s+(?:dark|light)/,"")+(Y["rgbaMix"+s[Z.alphaBG]].luminance<.22?" dark":" light"),X=G,N(),Z.actionCallback&&Z.actionCallback(e,a||o.name||t||"external"))}function V(e){var t=e||w.event,o=Z.scale,r=te(t),e=(r.X-H.left)*(4===o?2:o),r=(r.Y-H.top)*o,o=Z.mode;return Y[o.type][o.x]=B(e/255,0,1),Y[o.type][o.y]=1-B(r/255,0,1),R(),J(t)}function F(e){var t=e||w.event,o=(te(t).Y-H.top)*Z.scale,e=Z.mode;return Y[e.type][e.z]=1-B(o/255,0,1),R(),J(t)}function f(e){var t=e||w.event,e=te(t);return D=!0,Y.alpha=B(j.round((e.X-H.left)/H.width*100),0,100)/100,R("alpha"),J(t)}function v(e){var t=e||w.event,o=te(t),r=u.pageY-o.Y,s=Z.delayOffset,e=X.type,o="alpha"===e;if(n||j.abs(r)>=s)return n||(n=(0<r?-s:s)+ +A.firstChild.data*(o?100:1),u.pageY+=n,r+=n,n=1,K(W.panel,"start-change","do-change"),W.panelCover.style.cssText="position:absolute;left:0;top:0;right:0;bottom:0",document.activeElement.blur(),L=w[I]($)),"cmyk"===e&&Z.cmyOnly&&(e="cmy"),o?(D=!0,Y.alpha=B(r/100,0,1)):(s=M[e][X.z],Y[e][X.z]="Lab"===e?B(r,s[0],s[1]):B(r/s[1],0,1)),R(o?"alpha":e),J(t)}function x(e){var t,o=e||w.event,r=o.which||o.keyCode,s=String.fromCharCode(r),a=document.activeElement,n=a.className.replace(Z.CSSPrefix,"").split("-"),l=n[0],c=n[1],i="alpha"===l,d="HEX"===l,p={k40:-1,k38:1,k34:-10,k33:10}["k"+r]/(i?100:1),u={HEX:/[0-9a-fA-F]/,Lab:/[\-0-9]/,alpha:/[\.0-9]/}[l]||/[0-9]/,m=M[l][l]||M[l][c],g=a.firstChild,h=se(a),f=g.data,n="0"!==f||d?f.split(""):[];if(/^(?:27|13)$/.test(r)?(J(o),a.blur()):"keydown"===o.type?(p?t=B(j.round(1e6*(+f+p))/1e6,m[0],m[1]):/^(?:8|46)$/.test(r)&&(h.range||(h.range++,h.start-=8===r?1:0),n.splice(h.start,h.range),t=n.join("")||"0"),t!==G&&J(o,!0)):"keypress"===o.type&&(/^(?:37|39|8|46|9)$/.test(r)||J(o,!0),u.test(s)&&(n.splice(h.start,h.range,s),t=n.join("")),h.start++),13===r&&d)return g.data.length%3==0||"0"===g.data?y.setColor("0"===g.data?"000":g.data,"rgb",Y.alpha,!0):(J(o,!0),a.focus());d&&t!==G&&(t=/^0+/.test(t)?t:parseInt(""+t,16)||0),t!==G&&""!==t&&+t>=m[0]&&+t<=m[1]&&(d&&(t=t.toString(16).toUpperCase()||"0"),i?Y[l]=+t:d||(Y[l][c]=+t/("Lab"===l?1:m[1])),R(i?"alpha":l),P(Y),z=!0,b(e,o.type),g.data=t,se(a,j.min(a.firstChild.data.length,h.start<0?0:h.start)))}function C(e){var t,o=e||w.event,r=o.target||o.srcElement,s=r.className,a=r.parentNode,n=Z,l=Y.RND.rgb,c=Z.mode,i="",d=n.CSSPrefix,p=/(?:hs|rgb)/.test(a.className)&&/^[HSBLRG]$/.test(r.firstChild?r.firstChild.data:""),u=/dblc/.test(o.type),o="";if(!u||p){if(-1!==s.indexOf("-labl "+d+"labl"))K(W[s.split("-")[0]],d+"hide",""),K(W[a.className.split("-")[1]],d+"hide");else if(-1!==s.indexOf(d+"butt"))p?(u&&2===Z.scale&&(i=(i=/hs/.test(c.type)?"rgb":/hide/.test(W.hsl.className)?"hsv":"hsl")+"-"+i[c.type.indexOf(c.z)]),y.setMode(i||s.replace("-butt","").split(" ")[0]),o="modeChange"):/^[rgb]/.test(s)?(i=s.split("-")[1],K(W.colorPicker,"no-rgb-"+i,(n["noRGB"+i]=!n["noRGB"+i])?G:""),o="noRGB"+i):r===W.alpha_labl?(t=n.customBG,i=n.alphaBG,K(W.colorPicker,"alpha-bg-"+i,"alpha-bg-"+(i=n.alphaBG=e.data||("w"===i?t?"c":"b":"c"===i?"b":"w"))),r.firstChild.data=i.toUpperCase(),W.ctrl.style.backgroundColor=W.memo.style.backgroundColor="c"!==i?"":"rgb("+j.round(255*t.r)+", "+j.round(255*t.g)+", "+j.round(255*t.b)+")",W.raster.style.cssText=W.raster_bg.previousSibling.style.cssText="c"!==i?"":Q(t.luminance<.22?.5:.4),o="alphaBackground"):r===W.alpha_butt?(K(W.colorPicker,"mute-alpha",(n.muteAlpha=!n.muteAlpha)?G:""),o="alphaState"):r===W.HEX_butt?(K(W.colorPicker,"no-HEX",(n.HEXState=!n.HEXState)?G:""),o="HEXState"):r===W.HEX_labl?(t="web save"===Y.saveColor,"web smart"===Y.saveColor||t?t?y.setColor(n.webUnsave,"rgb"):(n.webUnsave||(n.webUnsave=E(l)),y.setColor(Y.webSave,"rgb")):(n.webUnsave=E(l),y.setColor(Y.webSmart,"rgb")),o="webColorState"):/Lab-x-labl/.test(s)&&(K(W.colorPicker,"cmy-only",(n.cmyOnly=!n.cmyOnly)?G:""),o="cmykState");else if(r===W.bsav)T(),o="saveAsBackground";else if(r===W.bres){s=E(l),l=Y.alpha;y.setColor(n.color),T(),y.setColor(s,"rgb",l),o="resetColor"}else if(a===W.col1)Y.hsv.h-=.5<Y.hsv.h?.5:-.5,R("hsv"),o="shiftColor";else if(a===W.col2)y.setColor(r.style.backgroundColor,"rgb",Y.background.alpha),o="setSavedColor";else if(a===W.memo){var m=function(){W.memos.blinker&&(W.memos.blinker.style.cssText=W.memos.cssText)},g=function(e){(W.memos.blinker=e).style.cssText="background-color:"+(.22<Y.RGBLuminance?"#333":"#DDD"),w.setTimeout(m,200)};if(r===W.memo_cursor){m(),W.memos.blinker=G,W.testNode.style.cssText=W.memo_store.style.cssText,W.memos.cssText=W.testNode.style.cssText;for(var h=W.memos.length-1;h--;)if(W.memos.cssText===W.memos[h].style.cssText){g(W.memos[h]);break}if(!W.memos.blinker){for(h=W.memos.length-1;h--;)W.memos[h+1].style.cssText=W.memos[h].style.cssText;W.memos[0].style.cssText=W.memo_store.style.cssText}o="toMemory"}else m(),y.setColor(r.style.backgroundColor,"rgb",r.style.opacity||1),W.memos.cssText=r.style.cssText,g(r),z=1,o="fromMemory"}o&&(P(Y),z=z||!0,b(e,o))}}function S(e,t){var o=e||w.event,r=o?te(o):{},s=t!==G,a=s?t:r.X-H.left+8,n=s?t:r.Y-H.top+8,e=Z.sizes,o=s?t:n<e.XXS[1]+25?0:a<e.XS[0]+25?1:a<e.S[0]+25||n<e.S[1]+25?2:3,r=[" S XS XXS"," S XS"," S",""][o],t="";U.resizer!==r&&(s=/XX/.test(r),e=Z.mode,!s||/hs/.test(e.type)&&"h"!==e.z?e.original&&y.setMode(e.original):(t=e.type+"-"+e.z,y.setMode(/hs/.test(e.type)?e.type+"-s":"hsv-s"),Z.mode.original=t),W.colorPicker.className=W.colorPicker.className.replace(/\s+(?:S|XS|XXS)/g,"")+r,Z.scale=s?4:/S/.test(r)?2:1,Z.currentSize=o,U.resizer=r,D=!0,$(),N()),W.resizer.style.cssText="display: block;width: "+(10<a?a:10)+"px;height: "+(10<n?n:10)+"px;"}function k(e){var t={rgb_r:{x:"b",y:"g"},rgb_g:{x:"b",y:"r"},rgb_b:{x:"r",y:"g"},hsv_h:{x:"s",y:"v"},hsv_s:{x:"h",y:"v"},hsv_v:{x:"h",y:"s"},hsl_h:{x:"s",y:"l"},hsl_s:{x:"h",y:"l"},hsl_l:{x:"h",y:"s"}},o=e.replace("-","_"),r="\\b(?:rg|hs)\\w\\-\\w\\b";return K(W.panel,r,e),K(W.slds,r,e),e=e.split("-"),Z.mode={type:e[0],x:t[o].x,y:t[o].y,z:e[1]}}function _(){var e,t=/\s+(?:hue-)*(?:dark|light)/g,o="className";for(e in W.curl[o]=W.curl[o].replace(t,""),W.curr[o]=W.curr[o].replace(t,""),W.slds[o]=W.slds[o].replace(t,""),W.sldr_2[o]=Z.CSSPrefix+"sldr-2",W.sldr_4[o]=Z.CSSPrefix+"sldr-4",W.sldl_3[o]=Z.CSSPrefix+"sldl-3",W.styles)e.indexOf("sld")||(W.styles[e].cssText="");U={}}function N(){W.styles.curr.cssText=W.styles.curl.cssText,W.curl.className=Z.CSSPrefix+"curl"+(O.noRGBZ?" "+Z.CSSPrefix+"curl-"+O.noRGBZ:""),W.curr.className=Z.CSSPrefix+"curr "+Z.CSSPrefix+"curr-"+("h"===Z.mode.z?O.HUEContrast:O.noRGBZ||O.RGBLuminance)}function R(e){P(m.setColor(G,e||Z.mode.type)),D=!0}function T(e){return m.saveAsBackground(),W.styles.col2.cssText="background-color: "+q(Y.background.RGB)+";"+Q(Y.background.alpha),e&&P(Y),Y}function P(e){var t=j,o=O,r=s[Z.alphaBG];o.hueDelta=t.round(100*e["rgbaMixBGMix"+r].hueDelta),o.luminanceDelta=t.round(100*e["rgbaMixBGMix"+r].luminanceDelta),o.RGBLuminance=.22<e.RGBLuminance?"light":"dark",o.HUEContrast=.22<e.HUELuminance?"light":"dark",o.contrast=o.luminanceDelta>o.hueDelta?"contrast":"",o.readabiltiy=7<=e["rgbaMixBGMix"+r].WCAG2Ratio?"green":4.5<=e["rgbaMixBGMix"+r].WCAG2Ratio?"orange":"",o.noRGBZ=Z["no"+Z.mode.type.toUpperCase()+Z.mode.z]?"g"===Z.mode.z&&e.rgb.g<.59||"b"===Z.mode.z||"r"===Z.mode.z?"dark":"light":G}function $(){if(z){if(!D)return L=w[I]($);D=!1}var e,t,o,r=Z,s=r.mode,a=r.scale,n=r.CSSPrefix,l=Y,c=W,i=c.styles,d=c.textNodes,p=M,u=X,m=O,g=U,h=j,f=Q,y=q,b=0,v=0,x=l[s.type][s.x],C=h.round(255*x/(4===a?2:a)),S=l[s.type][s.y],k=1-S,_=h.round(255*k/a),N=1-l[s.type][s.z],R=h.round(255*N/a),T=[x,S],P="rgb"===s.type,E="h"===s.z,B="hsl"===s.type,a=B&&"s"===s.z,x=z===V,S=z===F;for(e in P&&(T[1]<=T[0]?v=1:b=1,g.sliderSwap!==b&&(c.sldr_2.className=r.CSSPrefix+"sldr-"+(3-b),g.sliderSwap=b)),(P&&!S||E&&!x||!E&&!S)&&(i[E?"sldl_2":"sldr_2"][P?"cssText":"backgroundColor"]=P?f((T[b]-T[v])/(1-T[v]||0)):y(l.hueRGB)),E||(S||(i.sldr_4.cssText=f(P?T[v]:a?h.abs(1-2*k):k)),x||(i.sldl_3.cssText=f(B&&"l"===s.z?h.abs(1-2*N):N)),B&&(t=a?"r-":"l-",o=a?.5<k?4:3:.5<N?3:4,g[a=a?"sldr_4":"sldl_3"]!==o&&(c[a].className=r.CSSPrefix+"sld"+t+o,g[a]=o))),S||(i.curm.cssText="left: "+C+"px; top: "+_+"px;"),x||(i.curl.top=R+"px"),u&&(i.curr.top=R+"px"),(u&&"alpha"===u.type||A===c.opacity)&&(i.opacity_slider.left=r.opacityPositionRelative?l.alpha*((H.width||c.opacity.offsetWidth)-(H.childWidth||c.opacity_slider.offsetWidth))+"px":100*l.alpha+"%"),i.col1.cssText="background-color: "+y(l.RND.rgb)+"; "+(r.muteAlpha?"":f(l.alpha)),i.opacity.backgroundColor=y(l.RND.rgb),i.cold.width=m.hueDelta+"%",i.cont.width=m.luminanceDelta+"%",d)t=e.split("_"),r.cmyOnly&&(t[0]=t[0].replace("k","")),o=t[1]?l.RND[t[0]][t[1]]:l.RND[t[0]]||l[t[0]],g[e]!==o&&(g[e]=o,d[e].data=359.5<o&&"HEX"!==e?0:o,"HEX"===e||r.noRangeBackground||(o=l[t[0]][t[1]]!==G?l[t[0]][t[1]]:l[t[0]],"Lab"===t[0]&&(o=(o-p[t[0]][t[1]][0])/(p[t[0]][t[1]][1]-p[t[0]][t[1]][0])),i[e].backgroundPosition=h.round(100*(1-o))+"% 0%"));(t=l._rgb?[l._rgb.r!==l.rgb.r,l._rgb.g!==l.rgb.g,l._rgb.b!==l.rgb.b]:[]).join("")!==g.outOfGammut&&(c.rgb_r_labl.firstChild.data=t[0]?"!":" ",c.rgb_g_labl.firstChild.data=t[1]?"!":" ",c.rgb_b_labl.firstChild.data=t[2]?"!":" ",g.outOfGammut=t.join("")),m.noRGBZ&&g.noRGBZ!==m.noRGBZ&&(c.curl.className=n+"curl "+n+"curl-"+m.noRGBZ,S||(c.curr.className=n+"curr "+n+"curr-"+m.noRGBZ),g.noRGBZ=m.noRGBZ),g.HUEContrast!==m.HUEContrast&&"h"===s.z?(c.slds.className=c.slds.className.replace(/\s+hue-(?:dark|light)/,"")+" hue-"+m.HUEContrast,S||(c.curr.className=n+"curr "+n+"curr-"+m.HUEContrast),g.HUEContrast=m.HUEContrast):g.RGBLuminance!==m.RGBLuminance&&(c.colorPicker.className=c.colorPicker.className.replace(/\s+(?:dark|light)/,"")+" "+m.RGBLuminance,S||"h"===s.z||m.noRGBZ||(c.curr.className=n+"curr "+n+"curr-"+m.RGBLuminance),g.RGBLuminance=m.RGBLuminance),g.contrast===m.contrast&&g.readabiltiy===m.readabiltiy||(c.ctrl.className=c.ctrl.className.replace(" contrast","").replace(/\s*(?:orange|green)/,"")+(m.contrast?" "+m.contrast:"")+(m.readabiltiy?" "+m.readabiltiy:""),g.contrast=m.contrast,g.readabiltiy=m.readabiltiy),g.saveColor!==l.saveColor&&(c.HEX_labl.firstChild.data=l.saveColor?"web save"===l.saveColor?"W":"M":"!",g.saveColor=l.saveColor),r.renderCallback&&r.renderCallback(l,s),z&&(L=w[I]($))}function E(e){var t,o={};for(t in e)o[t]=e[t];return o}function q(e,t){for(var o="",r=(t||"rgb").split(""),s=r.length;s--;)o=", "+e[r[s]]+o;return(t||"rgb")+"("+o.substr(2)+")"}function B(e,t,o){return o<e?o:e<t?t:e}function Q(e){return e===G&&(e=1),p?"opacity: "+j.round(1e10*e)/1e10+";":"filter: alpha(opacity="+j.round(100*e)+");"}function J(e,t){return e.preventDefault?e.preventDefault():e.returnValue=!1,t||(w.getSelection?w.getSelection().removeAllRanges():document.selection.empty()),!1}function K(e,t,o){return!!e&&(e.className=o!==G?e.className.replace(new RegExp("\\s+?"+t,"g"),o?" "+o:""):e.className+" "+t)}function ee(e){var t=e.getBoundingClientRect?e.getBoundingClientRect():{top:0,left:0},o=e&&e.ownerDocument,r=o.body,s=o.defaultView||o.parentWindow||w,e=o.documentElement||r.parentNode,o=e.clientTop||r.clientTop||0,r=e.clientLeft||r.clientLeft||0;return{left:t.left+(s.pageXOffset||e.scrollLeft)-r,top:t.top+(s.pageYOffset||e.scrollTop)-o}}function te(e){var t=w.document;return{X:e.pageX||e.clientX+t.body.scrollLeft+t.documentElement.scrollLeft,Y:e.pageY||e.clientY+t.body.scrollTop+t.documentElement.scrollTop}}function oe(e,t,o){oe.cache=oe.cache||{_get:function(e,t,o,r){for(var s=oe.cache[t]||[],a=s.length;a--;)if(e===s[a].obj&&""+o==""+s[a].func)return o=s[a].func,r||(s[a]=s[a].obj=s[a].func=null,s.splice(a,1)),o},_set:function(e,t,o){var r=oe.cache[t]=oe.cache[t]||[];if(oe.cache._get(e,t,o,!0))return!0;r.push({func:o,obj:e})}},!o.name&&oe.cache._set(e,t,o)||"function"!=typeof o||(e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent("on"+t,o))}function re(e,t,o){"function"==typeof o&&(o.name||(o=oe.cache._get(e,t,o)||o),e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent("on"+t,o))}function se(e,t){var o,r,s={};return t===G?((s=w.getSelection?(e.focus(),(r=(o=w.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(e),r.setEnd(o.endContainer,o.endOffset),{end:r.toString().length,range:o.toString().length}):(e.focus(),o=document.selection.createRange(),(r=document.body.createTextRange()).moveToElementText(e),r.setEndPoint("EndToEnd",o),{end:r.text.length,range:o.text.length})).start=s.end-s.range,s):(-1==t&&(t=e.text().length),w.getSelection?(e.focus(),w.getSelection().collapse(e.firstChild,t)):((s=document.body.createTextRange()).moveToElementText(e),s.moveStart("character",t),s.collapse(!0),s.select()),t)}(w.ColorPicker=e).addEvent=oe,e.removeEvent=re,e.getOrigin=ee,e.limitValue=B,e.changeClass=K,e.prototype.setColor=function(e,t,o,r){g(this),X=!0,P(m.setColor.apply(m,arguments)),r&&this.startRender(!0)},e.prototype.saveAsBackground=function(){return g(this),T(!0)},e.prototype.setCustomBackground=function(e){return g(this),m.setCustomBackground(e)},e.prototype.startRender=function(e){g(this),e?(z=!1,$(),this.stopRender()):(z=1,L=w[I]($))},e.prototype.stopRender=function(){g(this),w[r](L),X&&(z=1,b(G,"external"))},e.prototype.setMode=function(e){g(this),k(e),_(),$()},e.prototype.destroyAll=function(){var e=this.nodes.colorPicker,o=function(e){for(var t in e)(e[t]&&"[object Object]"===e[t].toString()||e[t]instanceof Array)&&o(e[t]),e[t]=null,delete e[t]};this.stopRender(),h(this,!0),o(this),e.parentNode.removeChild(e),e=null},e.prototype.renderMemory=function(e){var t,o=this.nodes.memos;"string"==typeof e&&(e=e.replace(/^'|'$/g,"").replace(/\s*/,"").split("','"));for(var r=o.length;r--;)e&&"string"==typeof e[r]&&(t=e[r].replace("rgba(","").replace(")","").split(","),e[r]={r:t[0],g:t[1],b:t[2],a:t[3]}),o[r].style.cssText="background-color: "+(e&&e[r]!==G?q(e[r])+";"+Q(e[r].a||1):"rgb(0,0,0);")},oe(d?document.body:w,"mouseup",b);for(var ae=o.length;ae--&&!w[I];)w[I]=w[o[ae]+"Request"+t],w[r]=w[o[ae]+"Cancel"+t]||w[o[ae]+"CancelRequest"+t];w[I]=w[I]||function(e){return w.setTimeout(e,1e3/Z.fps)},w[r]=w[r]||function(e){return w.clearTimeout(e),L=null}}(window);