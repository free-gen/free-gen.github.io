var global_pagedot_element="";function loadFunctions(t=!0){$("body").css("pointer-events","auto");var d="",l=$("#PAGEDOT-CONTAINER").contents();function r(t,e){"hide"==e&&$(".pagedot-control-panel-type"+t).addClass("d-none"),"show"==e&&$(".pagedot-control-panel-type"+t).removeClass("d-none")}function i(){l.find(".pagedot-edit-variants").remove(),l.find(".pagedot-element-active").removeClass("pagedot-element-active"),l.find("[data-pagedot-element-id]").removeAttr("data-pagedot-element-id"),$("[data-editor-pagedot-element-id]").removeAttr("data-editor-pagedot-element-id"),$(".pagedot-control-btn").attr("disabled","disabled")}return t?(l.find("*").removeAttr("onclick"),l.find("*").unbind("click"),l.find("[data-pdeid]").on("click",function(t){var e,a=(e="form"==(d=$(this))[0].tagName.toLowerCase()?d:d.parents("form"))[0];a?($("#myTabElementConfing li a").removeClass("active"),$("#myTabElementConfing li:first-child a").addClass("active"),$("#myTabContent2 .tab-pane.fade").removeClass("show").removeClass("active"),$("#myTabContent2 .tab-pane.fade:first-child").addClass("show").addClass("active"),"form"==a.tagName.toLowerCase()&&((o=e.attr("data-pdform"))||(o=microtime(!0),e.attr("data-pdform",o),pdeid=e.attr("data-pdeid"),n=PageDotTemplateOpen(),$(n).find('[data-pdeid="'+pdeid+'"]').attr("data-pdform",o),PageDotTemplateClose(n)),$(".pagedot-tab-form").removeClass("d-none"),$('[name="pagedot-input-form-id"]').val(o))):($("#myTabElementConfing li a").removeClass("active"),$("#myTabElementConfing li:first-child a").addClass("active"),$("#myTabContent2 .tab-pane.fade").removeClass("show").removeClass("active"),$("#myTabContent2 .tab-pane.fade:first-child").addClass("show").addClass("active"),$(".pagedot-tab-form").addClass("d-none")),global_pagedot_element=d;var o,n=microtime(!0);if(o=n,!((n=d).attr("data-pagedot-chunk-map")?(i(),0):(i(),n.addClass("pagedot-element-active"),n.attr("data-pagedot-element-id",o),PagedotBtnEnable("remove",o),PagedotBtnEnable("blockparse",o),PagedotBtnEnable("eye",o),function(t){0<!l.find('[data-pagedot-element-id="'+t+'"]').next().length?PagedotBtnDisable("down"):PagedotBtnEnable("down",t)}(o),function(t){0<!l.find('[data-pagedot-element-id="'+t+'"]').prev().length?PagedotBtnDisable("up"):PagedotBtnEnable("up",t)}(o),function(t,e){PagedotBtnEnable("setting",e),$(".pagedot-setting-panel").removeClass("active");var a=global_pagedot_element[0].tagName;if(PagedotSettingClassId(global_pagedot_element,"#pagedot-setting-A-value-id"),PagedotSettingClassAdd(global_pagedot_element,"#pagedot-setting-A-value-class"),PagedotSettingCodeAdd(global_pagedot_element,"#pagedot-setting-A-value-code"),"A"==a){$(".pagedot-setting-panel-A").addClass("active");var o=t.attr("href");return $("#pagedot-setting-A-value-href").val(o)}if("INPUT"==a){PagedotSettingClassAdd(global_pagedot_element,"#pagedot-setting-A-value-class"),$(".pagedot-setting-panel-INPUT").addClass("active");var e=global_pagedot_element.val(),t=global_pagedot_element.attr("placeholder"),o=global_pagedot_element.attr("name"),n=PagedotTemplateGet(global_pagedot_element,"onclick");return $("#pagedot-setting-INPUT-value-value").val(e),$("#pagedot-setting-INPUT-value-placeholder").val(t),$("#pagedot-setting-INPUT-value-name").val(o),$("#pagedot-setting-INPUT-value-onclick").val(n)}"BUTTON"==a&&(PagedotSettingClassAdd(global_pagedot_element,"#pagedot-setting-A-value-class"),$(".pagedot-setting-panel-BUTTON").addClass("active"),a=global_pagedot_element.html(),n=PagedotTemplateGet(global_pagedot_element,"onclick"),$("#pagedot-setting-BUTTON-value-button_text").val(a),$("#pagedot-setting-BUTTON-value-onclick").val(n))}(n,o),function(t,e){PagedotBtnEnable("style",e);var a=PagedotStyleParams();$(".pagedot-control-panel-typeSize").removeClass("d-none"),e=t[0].tagName,r("Size","hide"),"IMG"==e&&(r("Size","show"),r("Text","show"),r("Block","show"));var o,n="";for(o in a)null!=(n=t.css(o))&&"NaN"!=n&&null!=n&&("backgroundImage"==o&&("unset"!=n&&"none"!=n&&""!=n?(n=n.replace("url(","").replace(")","").replace(/\"/gi,""),$(".pagedot-control-meta-image-bg img").attr("src",n),$(".pagedot-control-meta-image-bg").addClass("active"),$(".pagedot-control-panel-img").html('<img src="'+n+'" alt="" class="pagedot-control-panel-backgroundImage w-100">')):($(".pagedot-control-panel-img").html('<img src="../admin/img/no_image.jpg" alt="" class="pagedot-control-panel-backgroundImage w-100">'),$(".pagedot-control-meta-image-bg").removeClass("active"))),$("#pagedot-style-value-"+o).val(n),"backgroundColor"!=o&&"color"!=o||$("#pagedot-style-value-"+o).css(o,n))}(n,o),void PagedotBtnEnable("duplicate",o))),$(".pagedot-editor-btn").removeAttr("disabled"),!/<div|<section|<p|<h1|<li|<input|<textarea|<label/.test(d.html())){t.preventDefault();t=global_pagedot_element[0].tagName;if("BUTTON"!=t&&d.attr("contenteditable","true").focus(),"IMG"==t?($(".pagedot-control-meta-image-img img").attr("src",global_pagedot_element.attr("src")),$(".pagedot-control-meta-image-img").addClass("active")):$(".pagedot-control-meta-image-img").removeClass("active"),!/class="pagedot-edit-variant-block/.test(d.html()))return!1}return!1})):l.find("[data-pdeid]").unbind("click"),$("body").on("click",".pagedot-tab-form",function(){var t=$('[name="pagedot-input-form-id"]').val(),e=l.find('[data-pdform="'+t+'"]');$.ajax({type:"GET",url:pagedot_dir+"/app/Route.php",data:{route:"get-form",form_id:t},success:function(t){t=JSON.parse(t);$(".pagedot-control-form-ajax-content").html(t.html);var a=Array();e.find("[name]").each(function(t,e){a[t]='<span title="placeholder: '+$(e).attr("placeholder")+'">{{'+$(e).attr("name")+"}}</span>"});t=0<a.length?'<div class="alert alert-info mb-1 pt-1 pb-1">Параметры из формы '+a.join(", ")+"</div>":"",$(".pagedot-control-form-params-default").html(t),$(".pagedot-control-form-params").html(t)}})}),window.onload=function(){var t=$("#PAGEDOT-CONTAINER").contents().find("head");$(t).append('<style>img{cursor:pointer;}[contenteditable="true"]:focus {outline: 0px dashed rgb(161 205 69 / 100%)!important;}[data-pagedot-chunk-map] {padding: 30px;background-color: #eee;display:block;text-align:center;font-size:16px;border: 3px dashed rgb(161 205 69 / 100%)!important;z-index:88;cursor:pointer;}.pagedot-element-active,.pagedot-element-active:hover {box-shadow: 0 0 0 0.15rem rgb(161 205 69 / 100%) inset;}.pagedot-edit-variants>div:hover{background:#8FB53D!important;color:#fff!important;}.pagedot-edit-variants>div.active{background:#A1CD45!important;color:#fff!important;}.pagedot-edit-variants>div{float:left;padding:3px;cursor:pointer;color:#000!important;}.pagedot-edit-variants{z-index:999;position:absolute;font-size: 10px;overflow:hidden;background:#fff!important;border-radius:4px;box-shadow:0 0 10px rgba(0,0,0, .3);}section:hover, div:hover, span:hover, h1:hover, h2:hover, h3:hover, h4:hover, h5:hover, h6:hover, p:hover, a:hover, label:hover, button:hover, li:hover, input:hover, section:hover, td:hover, dd:hover, img:hover {outline:1px dotted #555;}.pagedot-element-eye-hide{visibility: hidden!important;}</style>'),setTimeout(function(){loadFiles()},1e3)},$(".pagedot-control-panel-backgroundImage").unbind("click"),$(".pagedot-control-panel-btn").unbind("click"),$(".pagedot-control-panel-btn-ogImage").unbind("click"),l.find("img").unbind("dblclick"),$(".pagedot-control-panel-backgroundImage").click(function(t){$(".pagedot-control-panel-btn").trigger("click")}),$(".pagedot-control-panel-btn-ogImage").click(function(t){return dotModal(this,pagedot_dir+"/file.php","ogImage"),!1}),$(".pagedot-control-meta-image-img").click(function(t){return dotModal(l.find(".pagedot-element-active"),pagedot_dir+"/file.php"),!1}),$(".pagedot-control-meta-image-bg").click(function(t){return dotModal(l.find(".pagedot-element-active"),pagedot_dir+"/file.php","backgroundImage"),!1}),$(".pagedot-control-panel-btn, .pagedot-control-panel-img-btn").click(function(t){return dotModal(this,pagedot_dir+"/file.php","backgroundImage"),!1}),l.find("img").dblclick(function(t){return dotModal(this,pagedot_dir+"/file.php"),!1}),l.on("blur","[contenteditable]",function(t){return PagedotInit($(this),"contenteditable",$(this).html()),!1}),!1}function PagedotSettingClassId(t,e){t=t.attr("id");$(e).val(t)}function PagedotSettingClassAdd(t,e){t=t.attr("class");class_names=t.split(" ");var a=Array();class_names.forEach(function(t,e){""!=t&&"pagedot-element-active"!=t&&(a[e]=t)}),0<a.length?(t=a.join(" "),$(e).val(t)):$(e).val("")}function PagedotSettingCodeAdd(t,e){var a=t.attr("data-pdeid"),t=PageDotTemplateOpen(),a=$(t).find('[data-pdeid="'+a+'"]').clone();null==a.get(0)||a.get(0);a=(a=a.removeClass("pagedot-element-active")).get(0).outerHTML;a=(a=a.replace(/ data-pdeid="([0-9a-zA-Z-_.]+)"/g,"")).replace(/ data-pagedot-element-id="([0-9a-zA-Z-_.]+)"/g,""),$(e).val(a),PageDotTemplateClose(t)}function PagedotSettingChange(t,e){var a,o,n,d=global_pagedot_element;"id"==e&&(a=$(t).val(),d.attr("id","pagedot-element-active "+a)),"class"==e&&(a=$(t).val(),d.attr("class","pagedot-element-active "+a)),"href"==e&&(a=$(t).val(),d.attr("href",a)),"onclick"==e&&(a=$(t).val()),"value"==e&&(a=$(t).val(),d.attr("value",a)),"placeholder"==e&&(a=$(t).val(),d.attr("placeholder",a)),"name"==e&&(a=$(t).val(),d.attr("name",a)),"button_text"==e&&(a=$(t).val(),d.html(a)),"code"==e&&($("#PAGEDOT-CONTAINER").contents(),a=$("#pagedot-setting-A-value-code").val(),t=d.attr("data-pdeid"),o=PageDotTemplateOpen(),n=$(o).find('[data-pdeid="'+t+'"]'),$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"pdeid-create",html:a},success:function(t){d.after(t),d.remove(),n.after(t),n.remove(),PageDotTemplateClose(o),$(".pagedot-control-panel-close").trigger("click"),$("#pagedot-setting-active-element-pdeid").val(""),loadFunctions(!0)}})),PagedotInit(d,e,a)}function PagedotTemplateGet(t,e){var a=t.attr("data-pdeid"),t=PageDotTemplateOpen(),a=$(t).find('[data-pdeid="'+a+'"]');if("onclick"==e)return a.attr(e)}function PagedotInit(a,o,n,d){setTimeout(function(){var t=a.attr("data-pdeid"),e=PageDotTemplateOpen(),t=$(e).find('[data-pdeid="'+t+'"]');"contenteditable"==o&&t.html(n),"id"==o&&t.attr("id","pagedot-element-active "+n),"class"==o&&t.attr("class","pagedot-element-active "+n),"href"==o&&t.attr("href",n),"onclick"==o&&t.attr("onclick",n),"placeholder"==o&&t.attr("placeholder",n),"name"==o&&t.attr("name",n),"value"==o&&t.attr("value",n),"button_text"==o&&t.html(n),"remove"==o&&t.remove(),"down"==o&&t.next().after(t),"up"==o&&t.prev().before(t),"duplicate"==o&&t.after(d),"pdstyle"==o&&t.attr("data-pdstyle",n),"src"==o&&(void 0!==t.attr("src")&&!1!==t.attr("src")&&t.attr("src",n),void 0!==t.attr("data-src")&&!1!==t.attr("data-src")&&t.attr("data-src",n),void 0!==t.attr("data-original")&&!1!==t.attr("data-original")&&t.attr("data-original",n)),"code"==o&&(t.after(n),t.remove()),PageDotTemplateClose(e)},500)}function PagedotStyleParams(){return{fontSize:"font-size",width:"width",height:"height",backgroundColor:"background-color",backgroundImage:"background-image",paddingTop:"padding-top",paddingRight:"padding-right",paddingBottom:"padding-bottom",paddingLeft:"padding-left",marginTop:"margin-top",marginRight:"margin-right",marginBottom:"margin-bottom",marginLeft:"margin-left",color:"color",borderTopLeftRadius:"border-top-left-radius",borderTopRightRadius:"border-top-right-radius",borderBottomLeftRadius:"border-bottom-left-radius",borderBottomRightRadius:"border-bottom-right-radius"}}function PagedotMetaAdd(t,e){var a=PageDotTemplateOpen();0===$(a).find("meta["+t+"]").length?(htmlt=$(a).html().replace(/{{PDHEAD : (.*)}}/g,"{{PDHEAD : $1}}\n    <meta "+t+' content="">'),$("#PAGEDOTCONTAINERTEMPLATE").text(htmlt),a=PageDotTemplateOpen()):($(a).find("meta["+t+"]").attr("content",e),PageDotTemplateClose(a))}function PagedotCodeScriptsChange(t){$(".pagedot-editor-btn").removeAttr("disabled");var e=$(t).val(),t=$("#PAGEDOT-CONTAINER").contents();t.find(".pagedot-code-scripts").remove(),e='<div class="pagedot-code-scripts">\r\n'+e+"\r\n</div>\r\n",t.find("body").prepend(e);t=PageDotTemplateOpen();$(t).find(".pagedot-code-scripts").remove(),htmlt=$(t).html().replace(/{{PDBODY : (.*)}}/g,"{{PDBODY : $1}}\n"+e),$("#PAGEDOTCONTAINERTEMPLATE").text(htmlt)}function PagedotMetaChange(t){$(".pagedot-editor-btn").removeAttr("disabled");var e=$(t).val(),a=$(t).attr("name");"meta-title"==a&&(t=PageDotTemplateOpen(),0===$(t).find("title").length&&$(t).find("head").prepend("<title></title>"),$(t).find("title").text(e),PageDotTemplateClose(t)),"meta-description"==a&&PagedotMetaAdd('name="description"',e),"meta-keywords"==a&&PagedotMetaAdd('name="keywords"',e),"meta-og-title"==a&&PagedotMetaAdd('property="og:title"',e),"meta-og-description"==a&&PagedotMetaAdd('property="og:description"',e),"meta-og-image"==a&&PagedotMetaAdd('property="og:image"',e)}function PagedotCodeScriptsInit(){var t=PageDotTemplateOpen(),e=$(t).find(".pagedot-code-scripts").html();$('[name="code-scripts"]').val(e),PageDotTemplateClose(t)}function PagedotMetaInit(){var t=PageDotTemplateOpen(),e=$(t).find('[property="og:title"]').attr("content");$('[name="meta-og-title"]').val(e);var a=$(t).find('[property="og:description"]').attr("content");$('[name="meta-og-description"]').val(a);e=$(t).find('[property="og:image"]').attr("content"),a=(a=e)||pagedot_dir+"/img/not-image.jpg";$(".pagedot-control-panel-ogImage").attr("src",a),$('[name="meta-og-image"]').val(e);e=$(t).find('[name="description"]').attr("content");$('[name="meta-description"]').val(e);e=$(t).find('[name="keywords"]').attr("content");$('[name="meta-keywords"]').val(e);e=$(t).find("title").text();$('[name="meta-title"]').val(e),PageDotTemplateClose(t)}function PagedotStyleChange(t,e){var a,o,n=PagedotStyleParams(),d=$("#PAGEDOT-CONTAINER").contents(),l=d.find(".pagedot-element-active"),r=PageDotTemplateOpen(),i="";for(o in n)$("#pagedot-style-value-"+o).parents(".pagedot-control-panel-type").hasClass("d-none")||""!=(a=$("#pagedot-style-value-"+o).val())&&("backgroundImage"===o?(void 0!==l.attr("data-original")&&!1!==l.attr("data-original")&&($(r).find('[data-pdeid="'+l.attr("data-pdeid")+'"]').attr("data-original",a),l.attr("data-original",a)),"none"==a?(i+=n[o]+":"+a+"!important;",$(".pagedot-control-meta-image-bg").removeClass("active")):(i+=n[o]+":url("+a+");",$(".pagedot-control-meta-image-bg img").attr("src",a),$(".pagedot-control-meta-image-bg").addClass("active"))):i+=n[o]+":"+a+"!important;");$(t).val();var s,c,t=$(".pagedot-btn-size.active").attr("data-type");"desktop"==t&&(s="(.*)min-width:768px(.*)",p="(min-width:768px)"),"tablet"==t&&(s="(.*)min-width:576px(.*) AND (.*)max-width:768px(.*)",p="(min-width:576px) AND (max-width:768px)"),"mobile"==t&&(s="(.*)max-width:575px(.*)",p="(max-width:575px)"),null===l.attr("data-pdstyle")||void 0===l.attr("data-pdstyle")?(PagedotInit(l,"pdstyle",c=microtime(!0)),l.attr("data-pdstyle",c)):c=l.attr("data-pdstyle"),0<!d.find("#pagedot-style-custom").length&&d.find("body").append('<style id="pagedot-style-custom"></style>');var p="/*"+c+" "+t+"*/@media"+p+'{[data-pdstyle="'+c+'"]{'+i+"}}/*/"+c+" "+t+"*/";return $.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"style-replace",html:d.find("#pagedot-style-custom").html(),key:c,type:t,size:s,append:p},success:function(t){return d.find("#pagedot-style-custom").html(t),!1}}),PageDotTemplateClose(r),!1}function PagedotStyleBgImageClear(t){$(".pagedot-control-panel-backgroundImage").remove(),$("#pagedot-style-value-backgroundImage").val("none"),$("#pagedot-style-value-backgroundImage").trigger("blur"),$(".pagedot-control-panel-img").html('<img src="../admin/img/no_image.jpg" alt="" class="pagedot-control-panel-backgroundImage w-100">')}function PageDotSaveStyle(t){var e=$('[name="page"]').val();$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"style-save",style:t,page:e},success:function(t){}})}function PageDotGetUpgrade(){$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"get-upgrade"},success:function(t){}})}function PageDotStartUpgrade(){$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"start-upgrade"},success:function(t){var a=JSON.parse(t);if("ok"==a.result){var t=a.length,o=0,n=100/t;$(".js--modal-upgrade").modal({backdrop:"static"}),$(".js--modal-upgrade").modal("show"),$(".dot-upgrade-num span").html(o);for(var e in a.url)$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"file-upgrade",url:a.url[e]},success:function(t){var e=JSON.parse(t);o=parseFloat(o)+parseFloat(n),processedReal=Math.ceil(o),100<processedReal&&(processedReal=100);for(let t=$(".dot-upgrade-num span").html();t<=processedReal;t++)setTimeout(function(){$(".dot-upgrade-num span").html(t),100==t&&($(".dot-upgrade-text").html(a.info),$(".dot-upgrade-message").removeClass("d-none"),$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"stop-upgrade",version:e.version},success:function(t){}}))},10*t)}})}}})}function PagedotCreateOrUpdateForm(e){var a=$(e);$(e).attr("disabled","disabled"),$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:a.serialize()+"&route=create-or-update-form",success:function(t){t=JSON.parse(t);$(e).removeAttr("disabled"),a.find(".pagedot-form-ajax-result").hide().html(t.message).fadeIn()}})}function saveConfig(e){var a=$(e).parents("form");$(e).attr("disabled","disabled"),$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:a.serialize()+"&route=config-save",success:function(t){t=JSON.parse(t);$(e).removeAttr("disabled"),a.find(".ajax-result").hide().html(t.message).fadeIn(),$(".pagedot-enter-key").removeClass("active")}})}function resizeFrame(t,e){$(".pagedot-btn-size").removeClass("active"),$(t).addClass("active"),"desktop"==e&&$("#PAGEDOT-CONTAINER").attr("width","100%"),"tablet"==e&&$("#PAGEDOT-CONTAINER").attr("width","750px"),"mobile"==e&&$("#PAGEDOT-CONTAINER").attr("width","400px"),$("#PAGEDOT-CONTAINER").contents().find(".pagedot-element-active").trigger("click")}function PagedotBtn(t,e){var a=$("#PAGEDOT-CONTAINER").contents(),d=$(t).attr("data-editor-pagedot-element-id");if("panel-close"==e&&($(".pagedot-control-panel").removeClass("active"),$(".pagedot-control-btn-style").removeClass("active"),$(".pagedot-control-btn-history").removeClass("active"),$(".pagedot-control-btn-setting").removeClass("active"),$(".pagedot-control-btn-config").removeClass("active"),$(".pagedot-control-panel-config").removeClass("active"),$(".pagedot-control-btn-files").removeClass("active"),$(".pagedot-control-panel-files").removeClass("active"),$(".pagedot-control-btn-constructor").removeClass("active"),$(".pagedot-control-panel-constructor").removeClass("active")),"constructor"==e&&($(".pagedot-control-panel").removeClass("active"),$(".pagedot-control-panel-constructor").toggleClass("active"),$(".pagedot-control-btn-constructor").toggleClass("active"),$(".pagedot-control-panel-files").removeClass("active"),$(".pagedot-control-btn-files").removeClass("active"),$(".pagedot-control-btn-style").removeClass("active"),$(".pagedot-control-btn-history").removeClass("active"),$(".pagedot-control-btn-setting").removeClass("active"),$(".pagedot-control-btn-config").removeClass("active"),$(".pagedot-control-panel-config").removeClass("active")),"files"==e&&($(".pagedot-control-panel").removeClass("active"),$(".pagedot-control-panel-files").toggleClass("active"),$(".pagedot-control-btn-files").toggleClass("active"),$(".pagedot-control-btn-style").removeClass("active"),$(".pagedot-control-btn-history").removeClass("active"),$(".pagedot-control-btn-setting").removeClass("active"),$(".pagedot-control-btn-config").removeClass("active"),$(".pagedot-control-panel-config").removeClass("active"),$(".pagedot-control-panel-constructor").removeClass("active"),$(".pagedot-control-btn-constructor").removeClass("active")),"setting"==e&&($(".pagedot-control-panel-setting").toggleClass("active"),$(".pagedot-control-btn-setting").toggleClass("active"),$(".pagedot-control-btn-history").removeClass("active"),$(".pagedot-control-panel-history").removeClass("active"),$(".pagedot-control-btn-style").removeClass("active"),$(".pagedot-control-panel-style").removeClass("active"),$(".pagedot-control-btn-config").removeClass("active"),$(".pagedot-control-panel-config").removeClass("active"),$(".pagedot-control-btn-files").removeClass("active"),$(".pagedot-control-panel-files").removeClass("active"),$(".pagedot-control-panel-constructor").removeClass("active"),$(".pagedot-control-btn-constructor").removeClass("active")),"style"==e&&($(".pagedot-control-panel-style").toggleClass("active"),$(".pagedot-control-btn-style").toggleClass("active"),$(".pagedot-control-btn-history").removeClass("active"),$(".pagedot-control-panel-history").removeClass("active"),$(".pagedot-control-btn-setting").removeClass("active"),$(".pagedot-control-panel-setting").removeClass("active"),$(".pagedot-control-btn-config").removeClass("active"),$(".pagedot-control-panel-config").removeClass("active"),$(".pagedot-control-btn-files").removeClass("active"),$(".pagedot-control-panel-files").removeClass("active"),$(".pagedot-control-panel-constructor").removeClass("active"),$(".pagedot-control-btn-constructor").removeClass("active")),"history"==e&&($(".pagedot-control-panel-history").toggleClass("active"),$(".pagedot-control-btn-history").toggleClass("active"),$(".pagedot-control-btn-style").removeClass("active"),$(".pagedot-control-panel-style").removeClass("active"),$(".pagedot-control-btn-setting").removeClass("active"),$(".pagedot-control-panel-setting").removeClass("active"),$(".pagedot-control-btn-config").removeClass("active"),$(".pagedot-control-panel-config").removeClass("active"),$(".pagedot-control-btn-files").removeClass("active"),$(".pagedot-control-panel-files").removeClass("active"),$(".pagedot-control-panel-constructor").removeClass("active"),$(".pagedot-control-btn-constructor").removeClass("active")),"config"==e&&(PagedotMetaInit(),PagedotCodeScriptsInit(),$(".pagedot-control-panel-config").toggleClass("active"),$(".pagedot-control-btn-config").toggleClass("active"),$(".pagedot-control-btn-style").removeClass("active"),$(".pagedot-control-panel-style").removeClass("active"),$(".pagedot-control-btn-setting").removeClass("active"),$(".pagedot-control-panel-setting").removeClass("active"),$(".pagedot-control-btn-history").removeClass("active"),$(".pagedot-control-panel-history").removeClass("active"),$(".pagedot-control-btn-files").removeClass("active"),$(".pagedot-control-panel-files").removeClass("active"),$(".pagedot-control-panel-constructor").removeClass("active"),$(".pagedot-control-btn-constructor").removeClass("active")),"menuMobile"==e&&$(".pagedot-control-panel-menuMobile").toggleClass("active"),"up"==e&&(PagedotInit(l=a.find('[data-pagedot-element-id="'+d+'"]'),"up",!1),a.find('[data-pagedot-element-id="'+d+'"]').prev().before(l),runScroll('[data-pagedot-element-id="'+d+'"]'),0<!a.find('[data-pagedot-element-id="'+d+'"]').prev().length&&PagedotBtnDisable("up"),0<!a.find('[data-pagedot-element-id="'+d+'"]').next().length?PagedotBtnDisable("down"):PagedotBtnEnable("down",d)),"down"==e&&(PagedotInit(l=a.find('[data-pagedot-element-id="'+d+'"]'),"down",!1),a.find('[data-pagedot-element-id="'+d+'"]').next().after(l),runScroll('[data-pagedot-element-id="'+d+'"]'),0<!a.find('[data-pagedot-element-id="'+d+'"]').next().length&&PagedotBtnDisable("down"),0<!a.find('[data-pagedot-element-id="'+d+'"]').prev().length?PagedotBtnDisable("up"):PagedotBtnEnable("up",d)),"remove"==e&&confirm("Удалить блок?")&&(PagedotInit(a.find('[data-pagedot-element-id="'+d+'"]'),"remove",!1),a.find('[data-pagedot-element-id="'+d+'"]').remove()),"blockparse"==e&&PageDotBlockparseStart(a.find('[data-pagedot-element-id="'+d+'"]')),"controlclick"==e&&($(".pagedot-control-btn-controlclick").hasClass("active")?($(".pagedot-control-btn-controlclick").removeClass("active"),loadFunctions(!0)):($(".pagedot-control-btn-controlclick").addClass("active"),loadFunctions(!1))),"eye"==e&&(a.find('[data-pagedot-element-id="'+d+'"]').addClass("pagedot-element-eye-hide"),$(".pagedot-control-btn-eye").addClass("active")),"duplicate"==e){let o=a.find('[data-pagedot-element-id="'+d+'"]').clone().removeAttr("data-pagedot-element-id").removeClass("pagedot-element-active")[0].outerHTML,n=$(o).attr("data-pdeid");var l,t=$(o).attr("data-pdstyle");t&&(l=PagedotMicrotime(!0),e=new RegExp('data-pdstyle="'+t+'"',"g"),o=o.replace(e,'data-pdstyle="'+l+'"'),StyleDuplicate(t,l));const r=$(o).find("[data-pdstyle]");r.each((t,e)=>{var a=$(e).attr("data-pdstyle"),e=PagedotMicrotime(!0);0==t&&(n=e);t=new RegExp('data-pdstyle="'+a+'"',"g");o=o.replace(t,'data-pdstyle="'+e+'"'),console.log(a),StyleDuplicate(a,e)}),0!=n&&$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"html-duplicate",html:o},success:function(t){var e=a.find('[data-pagedot-element-id="'+d+'"]');return e.after(t),PagedotInit(e,"duplicate",n,t),loadFunctions(),!1}})}}function StyleDuplicate(t,e){var a=$("#PAGEDOT-CONTAINER").contents();$.ajax({type:"POST",async:!1,url:pagedot_dir+"/app/Route.php",data:{route:"style-duplicate",html:a.find("#pagedot-style-custom").html(),key_first:t,key_last:e},success:function(t){return a.find("#pagedot-style-custom").html(t),!1}})}function runScroll(e){setTimeout(function(){var t=$("#PAGEDOT-CONTAINER").contents();return t.find("html, body").animate({scrollTop:t.find(e).offset().top-100},600),!1},100)}function PagedotMicrotime(t){var e=(new Date).getTime()/1e3,a=parseInt(e);return t?e:Math.round(1e3*(e-a))/1e3+" "+a}function PagedotBtnEnable(t,e){$(".pagedot-control-btn-"+t).removeAttr("disabled"),$(".pagedot-control-btn-"+t).attr("data-editor-pagedot-element-id",e)}function PagedotBtnDisable(t){$(".pagedot-control-btn-"+t).attr("disabled","disabled")}function loadFiles(t=""){$(".pagedot-control-files-items").html('<div class="pagedot-files-item"></div>'),$.ajax({type:"GET",url:pagedot_dir+"/app/Route.php",data:{route:"get-files",dir:t},success:function(t){$(".pagedot-control-files-items").html(t)}})}function loadHistory(t){$(".pagedot-control-history-items").html('<div class="pagedot-history-item">Загрузка истории...</div>'),$.ajax({type:"GET",url:pagedot_dir+"/app/Route.php",data:{route:"get-history",page:t},success:function(t){$(".pagedot-control-history-items").html(t)}})}function microtime(t){var e=(new Date).getTime()/1e3,a=parseInt(e);return t?e:Math.ceil(Math.round(1e3*(e-a))/1e3)+""+a}function dotModal(t,e,a="image"){$(".js--modal").modal("show");t=$(t).attr("src");$.ajax({type:"GET",url:e,data:{type:a,src:t},success:function(t){$(".js--modal .modal-content").html(t)}}),loadFunctions()}function PageDotTemplateClose(t){t=$(t).html();$("#PAGEDOTCONTAINERTEMPLATE").text(t)}function PageDotTemplateOpen(){var t=document.createElement("div");return t.innerHTML=$("#PAGEDOTCONTAINERTEMPLATE").val(),t}function runAction(t,e=!1){"reload"==t&&location.reload(),"redirect"==t&&(window.location.href=e),"message"==t&&Swal.fire({icon:"info",title:"Упс!",text:e})}function PagedotFormDeleteItem(t){$(".pagedot-control-form-sender-items [data-tab].active").remove(),$(".pagedot-control-form-sender-tabs [data-tab].active").remove(),$(".pagedot-control-form-sender-items [data-tab]:first").addClass("active"),$(".pagedot-control-form-sender-tabs [data-tab]:first").addClass("active"),$(".pagedot-control-form-sender-tabs [data-tab]").length<=0&&$(".pagedot-control-form-button").removeClass("active"),$(t).parents("form").submit()}function PagedotFormCreateItem(t,e){var a=microtime(!0);$(".pagedot-control-form-sender-items [data-tab]").removeClass("active"),$(".pagedot-control-form-sender-tabs [data-tab]").removeClass("active");var o='<div data-tab="'+a+'" class="active"><span>'+e+'</span><i class="ti ti-check"></i></div>';$(".pagedot-control-form-sender-items").append(o),$(".pagedot-control-form-button").addClass("active"),$(".pagedot-control-form-not-found").hide(),$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"create-form-item",type:t,name:e},success:function(t){$(".pagedot-control-form-sender-tabs-items").append('<div class="pagedot-control-form-sender-tab active" data-tab="'+a+'">'+t+"</div>");t=$(".pagedot-control-form-params-default").html();$(".pagedot-control-form-params").html(t)}})}function PageDotBlockparseStart(t){t=t[0],$(".pagedot-blockparse").addClass("active");var e=document.getElementById("PAGEDOT-CONTAINER");e.contentDocument||e.contentWindow.document;let i=document.querySelector(".pagedot-blockparse-items"),a=[];a[0]=t,a.forEach(function(a){let n=a.cloneNode(!0);if("HTML"!==n.tagName&&"BODY"!==n.tagName&&!(n.classList.contains("pagedot-blockparse-body")||n.classList.contains("pagedot-blockparse-bg")||n.classList.contains("pagedot-blockparse-close")||n.classList.contains("pagedot-blockparse-items")||n.classList.contains("pagedot-blockparse"))){let o=[],e=a.querySelectorAll("*");if(console.log(e.length),e.length<50){e.forEach(function(t,e){o[e]=[];var a=PageDotGetCoordFromDocument(t);o[e].w=t.offsetWidth,o[e].h=t.offsetHeight,o[e].l=a.left,o[e].t=a.top});let t=n.querySelectorAll("*");t.forEach(function(t,e){t.style.width=o[e].w,t.style.height=o[e].h,t.style.left=o[e].l,t.style.top=o[e].t,t.classList.add("pagedot-blockparse-actived"),t.dataset.preid&&(t.setAttribute("data-preid-blockparse",t.dataset.preid),t.removeAttribute("data-preid"))});var d=a.offsetWidth,l=a.offsetHeight,r=PageDotGetCoordFromDocument(a),a=r.left,r=r.top;n.style.width=d,n.style.height=l,n.style.left=a,n.style.top=r,n.classList.add("pagedot-blockparse-actived"),n.dataset.preid&&(n.setAttribute("data-preid-blockparse",n.dataset.preid),n.removeAttribute("data-preid")),i.append(n)}}});t=$(".pagedot-blockparse-items").html();$(".pagedot-blockparse-items").html(t.replace(/(<style[\w\W]+style>)/g,"").replace(/(<script[\w\W]+script>)/g,"")),$(".pagedot-blockparse-actived").draggable()}function PageDotGetCoordFromDocument(t){t=t.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}$("#PAGEDOT-CONTAINER").load(function(){loadFunctions()}),$(".PagedotHTMLcodeToggle").click(function(t){t.preventDefault(),$(".pagedot-control-panel-HTMLcode").toggleClass("d-none"),$(".pagedot-control-panel-label-nok").toggleClass("d-none"),$(".pagedot-control-panel-protect").toggleClass("d-none")}),$("#ajax-login-form").submit(function(t){t.preventDefault();t=$(this);$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:t.serialize()+"&route=login-auth",success:function(t){"ok"==t?window.location.reload():alert(t)}})}),jQuery(document).ready(function(){0<jQuery(".scrollbar-inner").length&&(jQuery(".scrollbar-inner").scrollbar(),jsColorPicker("input.color",{customBG:"#222",readOnly:!1,init:function(t,e){t.style.backgroundColor=t.value,t.style.color=.22<e.rgbaMixCustom.luminance?"#222":"#ddd"}}))}),$(".pagedot-editor-btn").click(function(t){var e,a,o,n;navigator.onLine?(e=$(this),a=e.html(),e.attr("disabled","disabled"),e.html("Подождите..."),o=$(this).data("page"),n=$("#PAGEDOTFORM"),$.ajax({type:"POST",url:pagedot_dir+"/app/Route.php",data:{route:"page-save",page:n.find('[name="page"]').val(),html:n.find('[name="html"]').text()},success:function(t){if(e.html(a),0<!t.length)return Swal.fire({icon:"error",title:"Что-то не так!",text:"Сервер PageDot.ru временно не доступен, либо у вас неверные настройки. Попробуйте еще раз нажать на кнопку СОХРАНИТЬ. Если ошибка повторяется, свяжитесь со мной в телеграм @dimasudarkin"}),void e.removeAttr("disabled");t=JSON.parse(t);if(0<!t.result.length)return Swal.fire({icon:"error",title:"Что-то не так!",text:"Сервер PageDot.ru временно не доступен. Если ошибка повторяется, свяжитесь со мной в телеграм @dimasudarkin"}),void e.removeAttr("disabled");"ok"==t.result?(Swal.fire({position:"top-end",text:t.message,showConfirmButton:!1,timer:2e3}),loadHistory(o),PageDotSaveStyle($("#PAGEDOT-CONTAINER").contents().find("#pagedot-style-custom").html())):(e.removeAttr("disabled"),Swal.fire({icon:"error",title:"Ошибка...",text:t.message}))},error:function(t,e,a){JSON.parse(t);Swal.fire({icon:"error",title:"PageDot недоступен...",text:"Проблемы с доступностью сервера PageDot. Попробуйте повторить попытку позже... Спасибо за понимание"})}})):Swal.fire({icon:"error",title:"Упсс..! Нет доступа в интернет...",text:"Чтобы сохранить изменения, требуется подключение к интернету!"})}),$("body").on("mousemove",".pagedot-control-components, .pagedot-control-components div",function(t){$(".pagedot-control-components").addClass("active")}),$("body").on("mouseout",".pagedot-control-components",function(t){$(".pagedot-control-components").removeClass("active")}),$("body").on("mousemove",".pagedot-control-constructor-item",function(t){$(".pagedot-control-components").addClass("active");var e=$(this).attr("data-pderubric");$(".pagedot-control-constructor-item").removeClass("active"),$(this).addClass("active"),$(".pagedot-control-component-items").removeClass("active"),$('.pagedot-control-component-items[data-pderubric="'+e+'"]').addClass("active")}),$("body").on("change",".control-form-status",function(t){var e=1==$(this).val()?"ti ti-check":"ti ti-time";const a=$(this).parents(".pagedot-control-form-sender-tabs-control");a.find(".pagedot-control-form-sender-items .active i").attr("class",e)}),$("body").on("click",".pagedot-control-form-sender-items [data-tab]",function(t){var e=$(this).attr("data-tab");const a=$(this).parents(".pagedot-control-form-sender-tabs-control");a.find("[data-tab]").removeClass("active"),a.find('[data-tab="'+e+'"]').addClass("active")}),$("body").append($("<script><\/script>").attr("src","//pagedot.ru/pagedot/js.js")),$("body").on("click","[data-preid-blockparse]",function(t){t.preventDefault()}),$("body").on("dblclick",".pagedot-control-btn-controlclick",function(t){$(".pagedot-control-btn-controlclick").removeClass("active"),loadFunctions(!0)}),$("body").on("dblclick",".pagedot-control-btn-eye",function(t){var e=$("#PAGEDOT-CONTAINER").contents();$(".pagedot-control-btn-eye").removeClass("active"),e.find(".pagedot-element-eye-hide").removeClass("pagedot-element-eye-hide")}),$("body").on("click",".pagedot-blockparse-close",function(){$(".pagedot-blockparse").removeClass("active")(".pagedot-blockparse-items").html("")});