<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="#">
    <title>My first three.js</title>
</head>
<body>

    <style>
        * {margin:0;padding:0;}
				:root {--index: calc(1vw + 1vh);}
        body {overflow: hidden; background-color: #000; color: white; font-family: sans-serif;}
				.container {width: calc(var(--index) * 20); height: calc(var(--index) * 20); position: fixed; top: calc(var(--index) * 6); left: calc(var(--index) * 6); border: dashed 1px greenyellow;}
    </style>

    <section>
			<div class="container"></div>
			<div class="empty"></div>
		</section>

    <script type="importmap">
        {
            "imports": {
                "three": "./imports/three.module.js",
                "OrbitControls": "./imports/OrbitControls.js",
                "GLTFLoader": "./imports/GLTFLoader.js",
                "RoomEnvironment": "./imports/RoomEnvironment.js",
                "RectAreaLightUniformsLib": "./imports/RectAreaLightUniformsLib.js"
            }
        }
    </script>

    <script type="module">
				// imports
        import * as THREE from 'three';
        import { OrbitControls } from 'OrbitControls';
        import { GLTFLoader } from 'GLTFLoader';
        import { RectAreaLightUniformsLib } from 'RectAreaLightUniformsLib';
				import { RoomEnvironment } from 'RoomEnvironment';
        // import { CubeTexture } from 'CubeTexture';
        // import { CubeTextureLoader } from 'CubeTextureLoader';
				
				// variables
				let container = document.querySelector('.container');
				let width = container.clientWidth;
				let height = container.clientHeight;
				let lightColor = 0x666666;
				let rotationSpeed = 10;
				// for MeshPhysicalMaterial
				let materialColor = 0xaa00ff;
				let materialEmissive = 0x111111;
				let materialRougness = 0.2;//0 - 1;
				let materialMetalness = 1;//0 - 1
				// end //

				// create renderer
				const renderer = new THREE.WebGLRenderer({ logarithmicDepthBuffer: true, antialias: true, alpha: true })
        renderer.setSize(width, height)
				container.appendChild( renderer.domElement );

				// create scene
				const scene = new THREE.Scene();
				// scene.background = new THREE.Color(0x000000, 0);

				// create fake room
				const pmremGenerator = new THREE.PMREMGenerator( renderer );
				scene.environment = pmremGenerator.fromScene( new RoomEnvironment(), 0.04 ).texture;

				// create camera and light
				const camera = new THREE.PerspectiveCamera( 70, width / height, 10, 100 );
				camera.position.z = 25;

				const ambientLight = new THREE.AmbientLight( 0x000000 );
				scene.add( ambientLight );

				const light1 = new THREE.PointLight( 0xffffff, 1, 0 );
				light1.position.set( 0, 200, 0 );
				scene.add( light1 );

				const light2 = new THREE.PointLight( 0xffffff, 1, 0 );
				light2.position.set( 100, 200, 100 );
				scene.add( light2 );

				const light3 = new THREE.PointLight( 0xffffff, 1, 0 );
				light3.position.set( - 100, - 200, - 100 );
				scene.add( light3 );

				// =========== CREATE GEOMETRY =========== //
				const geometry = new THREE.TorusGeometry( 10, 3, 64, 100 );
				const material = new THREE.MeshPhysicalMaterial({
					color: materialColor,
					emissive: materialEmissive,
					roughness: materialRougness,
					metalness: materialMetalness
				});
				const mesh = new THREE.Mesh( geometry, material );
				scene.add( mesh );

				// create render and animation
				function render() {
					requestAnimationFrame( render );
						//rotationSpeed
						mesh.rotation.x += rotationSpeed * 0.001;
						mesh.rotation.y += rotationSpeed * 0.001;
						mesh.rotation.z += rotationSpeed * 0.001;
					renderer.render( scene, camera );
					}

					// create responsive
					window.addEventListener( 'resize', function () {
					camera.aspect = container.clientWidth / container.clientHeight;
					camera.updateProjectionMatrix();
					renderer.setSize( container.clientWidth, container.clientHeight );
					}, false );

					render();

    </script>
</body>
</html>